import{a as Se,c as Ie,j as Fe}from"./vendor-Dp_TtJtU.js";import"./bootstrap-BaMMGOwJ.js";import{m as ie}from"./module.esm-BVmYX9MG.js";var Ae={exports:{}};(function(ne){(function(d,L){ne.exports=L(Se)})(Ie,function(d){var L=function(e,t){if(!(typeof t=="string"&&!t.length)){var i=typeof t=="string"?new RegExp(t,"i"):t,n=function(r){var s=0;if(r.nodeType===3){var o=r.data.search(i);if(o>=0&&r.data.length>0){var l=r.data.match(i),a=document.createElement("span");a.className="highlight";var u=r.splitText(o);u.splitText(l[0].length);var p=u.cloneNode(!0);a.appendChild(p),u.parentNode.replaceChild(a,u),s=1}}else if(r.nodeType===1&&r.childNodes&&!/(script|style)/i.test(r.tagName)&&(r.className!=="highlight"||r.tagName!=="SPAN"))for(var m=0;m<r.childNodes.length;++m)m+=n(r.childNodes[m]);return s};return e.each(function(){n(this)})}};d.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName;var e=this.parentNode;e.replaceChild(this.firstChild,this),e.normalize()}).end()};var E=function(){};E.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var i=arguments.length;if(i===0)return delete this._events;if(i===1)return delete this._events[e];this._events=this._events||{},e in this._events&&this._events[e].splice(this._events[e].indexOf(t),1)},trigger:function(e){const t=this._events=this._events||{};if(e in t)for(var i=0;i<t[e].length;i++)t[e][i].apply(this,Array.prototype.slice.call(arguments,1))}},E.mixin=function(e){for(var t=["on","off","trigger"],i=0;i<t.length;i++)e.prototype[t[i]]=E.prototype[t[i]]};var M={};M.mixin=function(e){e.plugins={},e.prototype.initializePlugins=function(t){var i,n,r,s=this,o=[];if(s.plugins={names:[],settings:{},requested:{},loaded:{}},re.isArray(t))for(i=0,n=t.length;i<n;i++)typeof t[i]=="string"?o.push(t[i]):(s.plugins.settings[t[i].name]=t[i].options,o.push(t[i].name));else if(t)for(r in t)t.hasOwnProperty(r)&&(s.plugins.settings[r]=t[r],o.push(r));for(;o.length;)s.require(o.shift())},e.prototype.loadPlugin=function(t){var i=this,n=i.plugins,r=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');n.requested[t]=!0,n.loaded[t]=r.fn.apply(i,[i.plugins.settings[t]||{}]),n.names.push(t)},e.prototype.require=function(t){var i=this,n=i.plugins;if(!i.plugins.loaded.hasOwnProperty(t)){if(n.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');i.loadPlugin(t)}return n.loaded[t]},e.define=function(t,i){e.plugins[t]={name:t,fn:i}}};var re={isArray:Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}},A=function(e,t){this.items=e,this.settings=t||{diacritics:!0}};A.prototype.tokenize=function(e,t){if(e=oe(String(e||"").toLowerCase()),!e||!e.length)return[];var i,n,r,s,o=[],l=e.split(/ +/);for(i=0,n=l.length;i<n;i++){if(r=ae(l[i]),this.settings.diacritics)for(s in D)D.hasOwnProperty(s)&&(r=r.replace(new RegExp(s,"g"),D[s]));t&&(r="\\b"+r),o.push({string:l[i],regex:new RegExp(r,"i")})}return o},A.prototype.iterator=function(e,t){var i;V(e)?i=Array.prototype.forEach||function(n){for(var r=0,s=this.length;r<s;r++)n(this[r],r,this)}:i=function(n){for(var r in this)this.hasOwnProperty(r)&&n(this[r],r,this)},i.apply(e,[t])},A.prototype.getScoreFunction=function(e,t){var i,n,r,s,o;i=this,e=i.prepareSearch(e,t),r=e.tokens,n=e.options.fields,s=r.length,o=e.options.nesting;var l=function(u,p){var m,h;return!u||(u=String(u||""),h=u.search(p.regex),h===-1)?0:(m=p.string.length/u.length,h===0&&(m+=.5),m)},a=function(){var u=n.length;return u?u===1?function(p,m){return l(j(m,n[0],o),p)}:function(p,m){for(var h=0,f=0;h<u;h++)f+=l(j(m,n[h],o),p);return f/u}:function(){return 0}}();return s?s===1?function(u){return a(r[0],u)}:e.options.conjunction==="and"?function(u){for(var p,m=0,h=0;m<s;m++){if(p=a(r[m],u),p<=0)return 0;h+=p}return h/s}:function(u){for(var p=0,m=0;p<s;p++)m+=a(r[p],u);return m/s}:function(){return 0}},A.prototype.getSortFunction=function(e,t){var i,n,r,s,o,l,a,u,p,m,h;if(r=this,e=r.prepareSearch(e,t),h=!e.query&&t.sort_empty||t.sort,p=function(f,g){return f==="$score"?g.score:j(r.items[g.id],f,t.nesting)},o=[],h)for(i=0,n=h.length;i<n;i++)(e.query||h[i].field!=="$score")&&o.push(h[i]);if(e.query){for(m=!0,i=0,n=o.length;i<n;i++)if(o[i].field==="$score"){m=!1;break}m&&o.unshift({field:"$score",direction:"desc"})}else for(i=0,n=o.length;i<n;i++)if(o[i].field==="$score"){o.splice(i,1);break}for(u=[],i=0,n=o.length;i<n;i++)u.push(o[i].direction==="desc"?-1:1);return l=o.length,l?l===1?(s=o[0].field,a=u[0],function(f,g){return a*G(p(s,f),p(s,g))}):function(f,g){var y,O,c;for(y=0;y<l;y++)if(c=o[y].field,O=u[y]*G(p(c,f),p(c,g)),O)return O;return 0}:null},A.prototype.prepareSearch=function(e,t){if(typeof e=="object")return e;t=se({},t);var i=t.fields,n=t.sort,r=t.sort_empty;return i&&!V(i)&&(t.fields=[i]),n&&!V(n)&&(t.sort=[n]),r&&!V(r)&&(t.sort_empty=[r]),{options:t,query:String(e||"").toLowerCase(),tokens:this.tokenize(e,t.respect_word_boundaries),total:0,items:[]}},A.prototype.search=function(e,t){var i=this,n,r,s,o;return r=this.prepareSearch(e,t),t=r.options,e=r.query,o=t.score||i.getScoreFunction(r),e.length?i.iterator(i.items,function(l,a){n=o(l),(t.filter===!1||n>0)&&r.items.push({score:n,id:a})}):i.iterator(i.items,function(l,a){r.items.push({score:1,id:a})}),s=i.getSortFunction(r,t),s&&r.items.sort(s),r.total=r.items.length,typeof t.limit=="number"&&(r.items=r.items.slice(0,t.limit)),r};var G=function(e,t){return typeof e=="number"&&typeof t=="number"?e>t?1:e<t?-1:0:(e=Y(String(e||"")),t=Y(String(t||"")),e>t?1:t>e?-1:0)},se=function(e,t){var i,n,r,s;for(i=1,n=arguments.length;i<n;i++)if(s=arguments[i],!!s)for(r in s)s.hasOwnProperty(r)&&(e[r]=s[r]);return e},j=function(e,t,i){if(!(!e||!t)){if(!i)return e[t];for(var n=t.split(".");n.length&&(e=e[n.shift()]););return e}},oe=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},ae=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},V=Array.isArray||typeof d<"u"&&d.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},D={a:"[aá¸€á¸Ä‚ÄƒÃ‚Ã¢ÇÇŽÈºâ±¥È¦È§áº áº¡Ã„Ã¤Ã€Ã ÃÃ¡Ä€ÄÃƒÃ£Ã…Ã¥Ä…Ä„ÃƒÄ…Ä„]",b:"[bâ¢Î²Î’Bà¸¿ðŒá›’]",c:"[cÄ†Ä‡ÄˆÄ‰ÄŒÄÄŠÄ‹CÌ„cÌ„Ã‡Ã§á¸ˆá¸‰È»È¼Æ‡ÆˆÉ•á´„ï¼£ï½ƒ]",d:"[dÄŽÄá¸Šá¸‹á¸á¸‘á¸Œá¸á¸’á¸“á¸Žá¸ÄÄ‘DÌ¦dÌ¦Æ‰É–ÆŠÉ—Æ‹ÆŒáµ­á¶á¶‘È¡á´…ï¼¤ï½„Ã°]",e:"[eÃ‰Ã©ÃˆÃ¨ÃŠÃªá¸˜á¸™ÄšÄ›Ä”Ä•áº¼áº½á¸šá¸›áººáº»Ä–Ä—Ã‹Ã«Ä’Ä“È¨È©Ä˜Ä™á¶’É†É‡È„È…áº¾áº¿á»€á»á»„á»…á»‚á»ƒá¸œá¸á¸–á¸—á¸”á¸•È†È‡áº¸áº¹á»†á»‡â±¸á´‡ï¼¥ï½…É˜ÇÆÆÎµ]",f:"[fÆ‘Æ’á¸žá¸Ÿ]",g:"[gÉ¢â‚²Ç¤Ç¥ÄœÄÄžÄŸÄ¢Ä£Æ“É Ä Ä¡]",h:"[hÄ¤Ä¥Ä¦Ä§á¸¨á¸©áº–áº–á¸¤á¸¥á¸¢á¸£É¦Ê°Ç¶Æ•]",i:"[iÃÃ­ÃŒÃ¬Ä¬Ä­ÃŽÃ®ÇÇÃÃ¯á¸®á¸¯Ä¨Ä©Ä®Ä¯ÄªÄ«á»ˆá»‰ÈˆÈ‰ÈŠÈ‹á»Šá»‹á¸¬á¸­Æ—É¨É¨Ì†áµ»á¶–Ä°iIÄ±Éªï¼©ï½‰]",j:"[jÈ·Ä´ÄµÉˆÉ‰ÊÉŸÊ²]",k:"[kÆ˜Æ™ê€êá¸°á¸±Ç¨Ç©á¸²á¸³á¸´á¸µÎºÏ°â‚­]",l:"[lÅÅ‚Ä½Ä¾Ä»Ä¼Ä¹Äºá¸¶á¸·á¸¸á¸¹á¸¼á¸½á¸ºá¸»Ä¿Å€È½Æšâ± â±¡â±¢É«É¬á¶…É­È´ÊŸï¼¬ï½Œ]",n:"[nÅƒÅ„Ç¸Ç¹Å‡ÅˆÃ‘Ã±á¹„á¹…Å…Å†á¹†á¹‡á¹Šá¹‹á¹ˆá¹‰NÌˆnÌˆÆÉ²È Æžáµ°á¶‡É³ÈµÉ´ï¼®ï½ŽÅŠÅ‹]",o:"[oÃ˜Ã¸Ã–Ã¶Ã“Ã³Ã’Ã²Ã”Ã´Ç‘Ç’ÅÅ‘ÅŽÅÈ®È¯á»Œá»ÆŸÉµÆ Æ¡á»Žá»ÅŒÅÃ•ÃµÇªÇ«ÈŒÈÕ•Ö…]",p:"[pá¹”á¹•á¹–á¹—â±£áµ½Æ¤Æ¥áµ±]",q:"[qê–ê—Ê ÉŠÉ‹ê˜ê™qÌƒ]",r:"[rÅ”Å•ÉŒÉÅ˜Å™Å–Å—á¹˜á¹™ÈÈ‘È’È“á¹šá¹›â±¤É½]",s:"[sÅšÅ›á¹ á¹¡á¹¢á¹£êž¨êž©ÅœÅÅ Å¡ÅžÅŸÈ˜È™SÌˆsÌˆ]",t:"[tÅ¤Å¥á¹ªá¹«Å¢Å£á¹¬á¹­Æ®ÊˆÈšÈ›á¹°á¹±á¹®á¹¯Æ¬Æ­]",u:"[uÅ¬Å­É„Ê‰á»¤á»¥ÃœÃ¼ÃšÃºÃ™Ã¹Ã›Ã»Ç“Ç”Å°Å±Å¬Å­Æ¯Æ°á»¦á»§ÅªÅ«Å¨Å©Å²Å³È”È•âˆª]",v:"[vá¹¼á¹½á¹¾á¹¿Æ²Ê‹êžêŸâ±±Ê‹]",w:"[wáº‚áºƒáº€áºÅ´Åµáº„áº…áº†áº‡áºˆáº‰]",x:"[xáºŒáºáºŠáº‹Ï‡]",y:"[yÃÃ½á»²á»³Å¶Å·Å¸Ã¿á»¸á»¹áºŽáºá»´á»µÉŽÉÆ³Æ´]",z:"[zÅ¹Åºáºáº‘Å½Å¾Å»Å¼áº’áº“áº”áº•ÆµÆ¶]"},Y=function(){var e,t,i,n,r="",s={};for(i in D)if(D.hasOwnProperty(i))for(n=D[i].substring(2,D[i].length-1),r+=n,e=0,t=n.length;e<t;e++)s[n.charAt(e)]=i;var o=new RegExp("["+r+"]","g");return function(l){return l.replace(o,function(a){return s[a]}).toLowerCase()}}();function Q(e,t){return navigator.userAgentData?e===navigator.userAgentData.platform:t.test(navigator.userAgent)}var T=Q("macOS",/Mac/),le=65,ue=13,pe=27,B=37,ce=38,de=80,U=39,fe=40,he=78,k=8,W=46,ge=16,ve=T?91:17,me=T?18:17,J=9,N=1,we=2,X=!Q("Android",/android/i)&&!!document.createElement("input").validity,Z=function(e){return typeof e<"u"},S=function(e){return typeof e>"u"||e===null?null:typeof e=="boolean"?e?"1":"0":e+""},P=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},H={};H.before=function(e,t,i){var n=e[t];e[t]=function(){return i.apply(e,arguments),n.apply(e,arguments)}},H.after=function(e,t,i){var n=e[t];e[t]=function(){var r=n.apply(e,arguments);return i.apply(e,arguments),r}};var ye=function(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}},Oe=function(e,t){var i;return function(){var n=this,r=arguments;window.clearTimeout(i),i=window.setTimeout(function(){e.apply(n,r)},t)}},ee=function(e,t,i){var n,r=e.trigger,s={};e.trigger=function(){var o=arguments[0];if(t.indexOf(o)!==-1)s[o]=arguments;else return r.apply(e,arguments)},i.apply(e,[]),e.trigger=r;for(n in s)s.hasOwnProperty(n)&&r.apply(e,s[n])},be=function(e,t,i,n){e.on(t,i,function(r){for(var s=r.target;s&&s.parentNode!==e[0];)s=s.parentNode;return r.currentTarget=s,n.apply(this,[r])})},R=function(e){var t={};if(e===void 0)return console.warn("WARN getInputSelection cannot locate input control"),t;if("selectionStart"in e)t.start=e.selectionStart,t.length=e.selectionEnd-t.start;else if(document.selection){e.focus();var i=document.selection.createRange(),n=document.selection.createRange().text.length;i.moveStart("character",-e.value.length),t.start=i.text.length-n,t.length=n}return t},_e=function(e,t,i){var n,r,s={};if(i)for(n=0,r=i.length;n<r;n++)s[i[n]]=e.css(i[n]);else s=e.css();t.css(s)},te=function(e,t){return e?(w.$testInput||(w.$testInput=d("<span />").css({position:"absolute",width:"auto",padding:0,whiteSpace:"pre"}),d("<div />").css({position:"absolute",width:0,height:0,overflow:"hidden"}).append(w.$testInput).appendTo("body")),w.$testInput.text(e),_e(t,w.$testInput,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]),w.$testInput.width()):0},Ce=function(e){var t=null,i=function(n,r){var s,o,l,a,u,p,m,h,f;n=n||window.event||{},r=r||{},!(n.metaKey||n.altKey)&&(!r.force&&e.data("grow")===!1||(s=e.val(),n.type&&n.type.toLowerCase()==="keydown"&&(o=n.keyCode,l=o>=48&&o<=57||o>=65&&o<=90||o>=96&&o<=111||o>=186&&o<=222||o===32,o===W||o===k?(f=R(e[0]),f.length?s=s.substring(0,f.start)+s.substring(f.start+f.length):o===k&&f.start?s=s.substring(0,f.start-1)+s.substring(f.start+1):o===W&&typeof f.start<"u"&&(s=s.substring(0,f.start)+s.substring(f.start+1))):l&&(m=n.shiftKey,h=String.fromCharCode(n.keyCode),m?h=h.toUpperCase():h=h.toLowerCase(),s+=h)),u=e.attr("placeholder"),u?p=te(u,e)+4:p=0,a=Math.max(te(s,e),p)+4,a!==t&&(t=a,e.width(a),e.triggerHandler("resize"))))};e.on("keydown keyup update blur",i),i()},$e=function(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML},xe=function(e){try{JSON.parse(str)}catch{return!1}return!0},w=function(e,t){var i,n,r,s,o=this;s=e[0],s.selectize=o;var l=window.getComputedStyle&&window.getComputedStyle(s,null);if(r=l?l.getPropertyValue("direction"):s.currentStyle&&s.currentStyle.direction,r=r||e.parents("[dir]:first").attr("dir")||"",d.extend(o,{order:0,settings:t,$input:e,tabIndex:e.attr("tabindex")||"",tagType:s.tagName.toLowerCase()==="select"?N:we,rtl:/rtl/i.test(r),eventNS:".selectize"+ ++w.count,highlightedValue:null,isBlurring:!1,isOpen:!1,isDisabled:!1,isRequired:e.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",lastValidValue:"",lastOpenTarget:!1,caretPos:0,loading:0,loadedSearches:{},isDropdownClosing:!1,$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:t.loadThrottle===null?o.onSearchChange:Oe(o.onSearchChange,t.loadThrottle)}),o.sifter=new A(this.options,{diacritics:t.diacritics}),o.settings.options){for(i=0,n=o.settings.options.length;i<n;i++)o.registerOption(o.settings.options[i]);delete o.settings.options}if(o.settings.optgroups){for(i=0,n=o.settings.optgroups.length;i<n;i++)o.registerOptionGroup(o.settings.optgroups[i]);delete o.settings.optgroups}o.settings.mode=o.settings.mode||(o.settings.maxItems===1?"single":"multi"),typeof o.settings.hideSelected!="boolean"&&(o.settings.hideSelected=o.settings.mode==="multi"),o.initializePlugins(o.settings.plugins),o.setupCallbacks(),o.setupTemplates(),o.setup()};return E.mixin(w),M.mixin(w),d.extend(w.prototype,{setup:function(){var e=this,t=e.settings,i=e.eventNS,n=d(window),r=d(document),s=e.$input,o,l,a,u,p,m,h,f,g,y;if(h=e.settings.mode,f=s.attr("class")||"",o=d("<div>").addClass(t.wrapperClass).addClass(f+" selectize-control").addClass(h),l=d("<div>").addClass(t.inputClass+" selectize-input items").appendTo(o),a=d('<input type="select-one" autocomplete="new-password" autofill="no" />').appendTo(l).attr("tabindex",s.is(":disabled")?"-1":e.tabIndex),m=d(t.dropdownParent||o),u=d("<div>").addClass(t.dropdownClass).addClass(h+" selectize-dropdown").hide().appendTo(m),p=d("<div>").addClass(t.dropdownContentClass+" selectize-dropdown-content").attr("tabindex","-1").appendTo(u),(y=s.attr("id"))&&(a.attr("id",y+"-selectized"),d("label[for='"+y+"']").attr("for",y+"-selectized")),e.settings.copyClassesToDropdown&&u.addClass(f),o.css({width:s[0].style.width}),e.plugins.names.length&&(g="plugin-"+e.plugins.names.join(" plugin-"),o.addClass(g),u.addClass(g)),(t.maxItems===null||t.maxItems>1)&&e.tagType===N&&s.attr("multiple","multiple"),e.settings.placeholder&&a.attr("placeholder",t.placeholder),e.settings.search||(a.attr("readonly",!0),a.attr("inputmode","none"),l.css("cursor","pointer")),!e.settings.splitOn&&e.settings.delimiter){var O=e.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");e.settings.splitOn=new RegExp("\\s*"+O+"+\\s*")}s.attr("autocorrect")&&a.attr("autocorrect",s.attr("autocorrect")),s.attr("autocapitalize")&&a.attr("autocapitalize",s.attr("autocapitalize")),s.is("input")&&(a[0].type=s[0].type),e.$wrapper=o,e.$control=l,e.$control_input=a,e.$dropdown=u,e.$dropdown_content=p,u.on("mouseenter mousedown mouseup click","[data-disabled]>[data-selectable]",function(v){v.stopImmediatePropagation()}),u.on("mouseenter","[data-selectable]",function(){return e.onOptionHover.apply(e,arguments)}),u.on("mouseup click","[data-selectable]",function(){return e.onOptionSelect.apply(e,arguments)}),be(l,"mouseup","*:not(input)",function(){return e.onItemSelect.apply(e,arguments)}),Ce(a),l.on({mousedown:function(){return e.onMouseDown.apply(e,arguments)},click:function(){return e.onClick.apply(e,arguments)}}),a.on({mousedown:function(v){(e.$control_input.val()!==""||e.settings.openOnFocus)&&v.stopPropagation()},keydown:function(){return e.onKeyDown.apply(e,arguments)},keypress:function(){return e.onKeyPress.apply(e,arguments)},input:function(){return e.onInput.apply(e,arguments)},resize:function(){e.positionDropdown.apply(e,[])},focus:function(){return e.ignoreBlur=!1,e.onFocus.apply(e,arguments)},paste:function(){return e.onPaste.apply(e,arguments)}}),r.on("keydown"+i,function(v){e.isCmdDown=v[T?"metaKey":"ctrlKey"],e.isCtrlDown=v[T?"altKey":"ctrlKey"],e.isShiftDown=v.shiftKey}),r.on("keyup"+i,function(v){v.keyCode===me&&(e.isCtrlDown=!1),v.keyCode===ge&&(e.isShiftDown=!1),v.keyCode===ve&&(e.isCmdDown=!1)}),r.on("mousedown"+i,function(v){if(e.isFocused){if(v.target===e.$dropdown[0]||v.target.parentNode===e.$dropdown[0])return!1;!e.$dropdown.has(v.target).length&&v.target!==e.$control[0]&&e.blur(v.target)}}),n.on(["scroll"+i,"resize"+i].join(" "),function(){e.isOpen&&e.positionDropdown.apply(e,arguments)}),n.on("mousemove"+i,function(){e.ignoreHover=e.settings.ignoreHover});var c=d("<div></div>"),I=s.children().detach();s.replaceWith(c),c.replaceWith(s),this.revertSettings={$children:I,tabindex:s.attr("tabindex")},s.attr("tabindex",-1).hide().after(e.$wrapper),Array.isArray(t.items)&&(e.lastValidValue=t.items,e.setValue(t.items),delete t.items),X&&s.on("invalid"+i,function(v){v.preventDefault(),e.isInvalid=!0,e.refreshState()}),e.updateOriginalInput(),e.refreshItems(),e.refreshState(),e.updatePlaceholder(),e.isSetup=!0,s.is(":disabled")&&e.disable(),e.on("change",this.onChange),s.data("selectize",e),s.addClass("selectized"),e.trigger("initialize"),t.preload===!0&&e.onSearchChange("")},setupTemplates:function(){var e=this,t=e.settings.labelField,i=e.settings.valueField,n=e.settings.optgroupLabelField,r={optgroup:function(s){return'<div class="optgroup">'+s.html+"</div>"},optgroup_header:function(s,o){return'<div class="optgroup-header">'+o(s[n])+"</div>"},option:function(s,o){var l=s.classes?" "+s.classes:"";l+=s[i]===""?" selectize-dropdown-emptyoptionlabel":"";var a=s.styles?' style="'+s.styles+'"':"";return"<div"+a+' class="option'+l+'">'+o(s[t])+"</div>"},item:function(s,o){return'<div class="item">'+o(s[t])+"</div>"},option_create:function(s,o){return'<div class="create">Add <strong>'+o(s.input)+"</strong>&#x2026;</div>"}};e.settings.render=d.extend({},r,e.settings.render)},setupCallbacks:function(){var e,t,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur",dropdown_item_activate:"onDropdownItemActivate",dropdown_item_deactivate:"onDropdownItemDeactivate"};for(e in i)i.hasOwnProperty(e)&&(t=this.settings[i[e]],t&&this.on(e,t))},onClick:function(e){var t=this;t.isDropdownClosing||(!t.isFocused||!t.isOpen)&&(t.focus(),e.preventDefault())},onMouseDown:function(e){var t=this,i=e.isDefaultPrevented();if(d(e.target),t.isFocused||i||window.setTimeout(function(){t.focus()},0),e.target!==t.$control_input[0]||t.$control_input.val()==="")return t.settings.mode==="single"?t.isOpen?t.close():t.open():(i||t.setActiveItem(null),t.settings.openOnFocus||(t.isOpen&&e.target===t.lastOpenTarget?(t.close(),t.lastOpenTarget=!1):(t.isOpen||(t.refreshOptions(),t.open()),t.lastOpenTarget=e.target))),!1},onChange:function(){var e=this;e.getValue()!==""&&(e.lastValidValue=e.getValue()),this.$input.trigger("input"),this.$input.trigger("change")},onPaste:function(e){var t=this;if(t.isFull()||t.isInputHidden||t.isLocked){e.preventDefault();return}t.settings.splitOn&&setTimeout(function(){var i=t.$control_input.val();if(i.match(t.settings.splitOn))for(var n=i.trim().split(t.settings.splitOn),r=0,s=n.length;r<s;r++)t.createItem(n[r])},0)},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);if(this.settings.create&&this.settings.mode==="multi"&&t===this.settings.delimiter)return this.createItem(),e.preventDefault(),!1},onKeyDown:function(e){e.target,this.$control_input[0];var t=this;if(t.isLocked){e.keyCode!==J&&e.preventDefault();return}switch(e.keyCode){case le:if(t.isCmdDown){t.selectAll();return}break;case pe:t.isOpen&&(e.preventDefault(),e.stopPropagation(),t.close());return;case he:if(!e.ctrlKey||e.altKey)break;case fe:if(!t.isOpen&&t.hasOptions)t.open();else if(t.$activeOption){t.ignoreHover=!0;var i=t.getAdjacentOption(t.$activeOption,1);i.length&&t.setActiveOption(i,!0,!0)}e.preventDefault();return;case de:if(!e.ctrlKey||e.altKey)break;case ce:if(t.$activeOption){t.ignoreHover=!0;var n=t.getAdjacentOption(t.$activeOption,-1);n.length&&t.setActiveOption(n,!0,!0)}e.preventDefault();return;case ue:t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),e.preventDefault());return;case B:t.advanceSelection(-1,e);return;case U:t.advanceSelection(1,e);return;case J:t.settings.selectOnTab&&t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),t.isFull()||e.preventDefault()),t.settings.create&&t.createItem()&&t.settings.showAddOptionOnCreate&&e.preventDefault();return;case k:case W:t.deleteSelection(e);return}if((t.isFull()||t.isInputHidden)&&!(T?e.metaKey:e.ctrlKey)){e.preventDefault();return}},onInput:function(e){var t=this,i=t.$control_input.val()||"";t.lastValue!==i&&(t.lastValue=i,t.onSearchChange(i),t.refreshOptions(),t.trigger("type",i))},onSearchChange:function(e){var t=this,i=t.settings.load;i&&(t.loadedSearches.hasOwnProperty(e)||(t.loadedSearches[e]=!0,t.load(function(n){i.apply(t,[e,n])})))},onFocus:function(e){var t=this,i=t.isFocused;if(t.isDisabled)return t.blur(),e&&e.preventDefault(),!1;t.ignoreFocus||(t.isFocused=!0,t.settings.preload==="focus"&&t.onSearchChange(""),i||t.trigger("focus"),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState())},onBlur:function(e,t){var i=this;if(i.isFocused&&(i.isFocused=!1,!i.ignoreFocus)){var n=function(){i.close(),i.setTextboxValue(""),i.setActiveItem(null),i.setActiveOption(null),i.setCaret(i.items.length),i.refreshState(),t&&t.focus&&t.focus(),i.isBlurring=!1,i.ignoreFocus=!1,i.trigger("blur")};i.isBlurring=!0,i.ignoreFocus=!0,i.settings.create&&i.settings.createOnBlur?i.createItem(null,!1,n):n()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(e){var t,i,n=this;e.preventDefault&&(e.preventDefault(),e.stopPropagation()),i=d(e.currentTarget),i.hasClass("create")?n.createItem(null,function(){n.settings.closeAfterSelect&&n.close()}):(t=i.attr("data-value"),typeof t<"u"&&(n.lastQuery=null,n.setTextboxValue(""),n.addItem(t),n.settings.closeAfterSelect?n.close():!n.settings.hideSelected&&e.type&&/mouse/.test(e.type)&&n.setActiveOption(n.getOption(t))))},onItemSelect:function(e){var t=this;t.isLocked||t.settings.mode==="multi"&&(e.preventDefault(),t.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,i=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(n){t.loading=Math.max(t.loading-1,0),n&&n.length&&(t.addOption(n),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||i.removeClass(t.settings.loadingClass),t.trigger("load",n)}])},getTextboxValue:function(){var e=this.$control_input;return e.val()},setTextboxValue:function(e){var t=this.$control_input,i=t.val()!==e;i&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return this.tagType===N&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){if((Array.isArray(e)?e:[e]).join("")!==this.items.join("")){var n=t?[]:["change"];ee(this,n,function(){this.clear(t),this.addItems(e,t)})}},setMaxItems:function(e){e===0&&(e=null),this.settings.maxItems=e,this.settings.mode=this.settings.mode||(this.settings.maxItems===1?"single":"multi"),this.refreshState()},setActiveItem:function(e,t){var i=this,n,r,s,o,l,a,u,p;if(i.settings.mode!=="single"){if(e=d(e),!e.length){d(i.$activeItems).removeClass("active"),i.$activeItems=[],i.isFocused&&i.showInput();return}if(n=t&&t.type.toLowerCase(),n==="mousedown"&&i.isShiftDown&&i.$activeItems.length){for(p=i.$control.children(".active:last"),o=Array.prototype.indexOf.apply(i.$control[0].childNodes,[p[0]]),l=Array.prototype.indexOf.apply(i.$control[0].childNodes,[e[0]]),o>l&&(u=o,o=l,l=u),r=o;r<=l;r++)a=i.$control[0].childNodes[r],i.$activeItems.indexOf(a)===-1&&(d(a).addClass("active"),i.$activeItems.push(a));t.preventDefault()}else n==="mousedown"&&i.isCtrlDown||n==="keydown"&&this.isShiftDown?e.hasClass("active")?(s=i.$activeItems.indexOf(e[0]),i.$activeItems.splice(s,1),e.removeClass("active")):i.$activeItems.push(e.addClass("active")[0]):(d(i.$activeItems).removeClass("active"),i.$activeItems=[e.addClass("active")[0]]);i.hideInput(),this.isFocused||i.focus()}},setActiveOption:function(e,t,i){var n,r,s,o,l,a=this;a.$activeOption&&(a.$activeOption.removeClass("active"),a.trigger("dropdown_item_deactivate",a.$activeOption.attr("data-value"))),a.$activeOption=null,e=d(e),e.length&&(a.$activeOption=e.addClass("active"),a.isOpen&&a.trigger("dropdown_item_activate",a.$activeOption.attr("data-value")),(t||!Z(t))&&(n=a.$dropdown_content.height(),r=a.$activeOption.outerHeight(!0),t=a.$dropdown_content.scrollTop()||0,s=a.$activeOption.offset().top-a.$dropdown_content.offset().top+t,o=s,l=s-n+r,s+r>n+t?a.$dropdown_content.stop().animate({scrollTop:l},i?a.settings.scrollDuration:0):s<t&&a.$dropdown_content.stop().animate({scrollTop:o},i?a.settings.scrollDuration:0)))},selectAll:function(){var e=this;e.settings.mode!=="single"&&(e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus())},hideInput:function(){var e=this;e.setTextboxValue(""),e.$control_input.css({opacity:0,position:"absolute",left:e.rtl?1e4:0}),e.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;return e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout(function(){e.ignoreFocus=!1,e.onFocus()},0)),e},blur:function(e){return this.$control_input[0].blur(),this.onBlur(null,e),this},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return typeof t=="string"&&(t=[{field:t}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t,nesting:e.nesting,filter:e.filter,respect_word_boundaries:e.respect_word_boundaries}},search:function(e){var t,i,n,r=this,s=r.settings,o=this.getSearchOptions();if(s.score&&(n=r.settings.score.apply(this,[e]),typeof n!="function"))throw new Error('Selectize "score" setting must be a function that returns a function');if(e!==r.lastQuery?(s.normalize&&(e=e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")),r.lastQuery=e,i=r.sifter.search(e,d.extend(o,{score:n})),r.currentResults=i):i=d.extend(!0,{},r.currentResults),s.hideSelected)for(t=i.items.length-1;t>=0;t--)r.items.indexOf(S(i.items[t].id))!==-1&&i.items.splice(t,1);return i},refreshOptions:function(e){var t,i,n,r,s,o,l,a,u,p,m,h,f,g,y,O;typeof e>"u"&&(e=!0);var c=this,I=c.$control_input.val().trim(),v=c.search(I),F=c.$dropdown_content,z=c.$activeOption&&S(c.$activeOption.attr("data-value"));for(r=v.items.length,typeof c.settings.maxOptions=="number"&&(r=Math.min(r,c.settings.maxOptions)),s={},o=[],t=0;t<r;t++)for(l=c.options[v.items[t].id],a=c.render("option",l),u=l[c.settings.optgroupField]||"",p=Array.isArray(u)?u:[u],i=0,n=p&&p.length;i<n;i++){if(u=p[i],!c.optgroups.hasOwnProperty(u)&&typeof c.settings.optionGroupRegister=="function"){var K;(K=c.settings.optionGroupRegister.apply(c,[u]))&&c.registerOptionGroup(K)}c.optgroups.hasOwnProperty(u)||(u=""),s.hasOwnProperty(u)||(s[u]=document.createDocumentFragment(),o.push(u)),s[u].appendChild(a)}for(this.settings.lockOptgroupOrder&&o.sort(function(b,_){var x=c.optgroups[b]&&c.optgroups[b].$order||0,$=c.optgroups[_]&&c.optgroups[_].$order||0;return x-$}),m=document.createDocumentFragment(),t=0,r=o.length;t<r;t++)u=o[t],c.optgroups.hasOwnProperty(u)&&s[u].childNodes.length?(h=document.createDocumentFragment(),h.appendChild(c.render("optgroup_header",c.optgroups[u])),h.appendChild(s[u]),m.appendChild(c.render("optgroup",d.extend({},c.optgroups[u],{html:$e(h),dom:h})))):m.appendChild(s[u]);if(F.html(m),c.settings.highlight&&(F.removeHighlight(),v.query.length&&v.tokens.length))for(t=0,r=v.tokens.length;t<r;t++)L(F,v.tokens[t].regex);if(!c.settings.hideSelected)for(c.$dropdown.find(".selected").removeClass("selected"),t=0,r=c.items.length;t<r;t++)c.getOption(c.items[t]).addClass("selected");c.settings.dropdownSize.sizeType!=="auto"&&c.isOpen&&c.setupDropdownHeight(),f=c.canCreate(I),f&&c.settings.showAddOptionOnCreate&&(F.prepend(c.render("option_create",{input:I})),O=d(F[0].childNodes[0])),c.hasOptions=v.items.length>0||f&&c.settings.showAddOptionOnCreate||c.settings.setFirstOptionActive,c.hasOptions?(v.items.length>0?(y=z&&c.getOption(z),v.query!==""&&c.settings.setFirstOptionActive?g=F.find("[data-selectable]:first"):v.query!==""&&y&&y.length?g=y:c.settings.mode==="single"&&c.items.length&&(g=c.getOption(c.items[0])),(!g||!g.length)&&(O&&!c.settings.addPrecedence?g=c.getAdjacentOption(O,1):g=F.find("[data-selectable]:first"))):g=O,c.setActiveOption(g),e&&!c.isOpen&&c.open()):(c.setActiveOption(null),e&&c.isOpen&&c.close())},addOption:function(e){var t,i,n,r=this;if(Array.isArray(e)){for(t=0,i=e.length;t<i;t++)r.addOption(e[t]);return}(n=r.registerOption(e))&&(r.userOptions[n]=!0,r.lastQuery=null,r.trigger("option_add",n,e))},registerOption:function(e){var t=S(e[this.settings.valueField]);return typeof t>"u"||t===null||this.options.hasOwnProperty(t)?!1:(e.$order=e.$order||++this.order,this.options[t]=e,t)},registerOptionGroup:function(e){var t=S(e[this.settings.optgroupValueField]);return t?(e.$order=e.$order||++this.order,this.optgroups[t]=e,t):!1},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(e,t){var i=this,n,r,s,o,l,a,u;if(e=S(e),s=S(t[i.settings.valueField]),e!==null&&i.options.hasOwnProperty(e)){if(typeof s!="string")throw new Error("Value must be set in option data");u=i.options[e].$order,s!==e&&(delete i.options[e],o=i.items.indexOf(e),o!==-1&&i.items.splice(o,1,s)),t.$order=t.$order||u,i.options[s]=t,l=i.renderCache.item,a=i.renderCache.option,l&&(delete l[e],delete l[s]),a&&(delete a[e],delete a[s]),i.items.indexOf(s)!==-1&&(n=i.getItem(e),r=d(i.render("item",t)),n.hasClass("active")&&r.addClass("active"),n.replaceWith(r)),i.lastQuery=null,i.isOpen&&i.refreshOptions(!1)}},removeOption:function(e,t){var i=this;e=S(e);var n=i.renderCache.item,r=i.renderCache.option;n&&delete n[e],r&&delete r[e],delete i.userOptions[e],delete i.options[e],i.lastQuery=null,i.trigger("option_remove",e),i.removeItem(e,t)},clearOptions:function(e){var t=this;t.loadedSearches={},t.userOptions={},t.renderCache={};var i=t.options;d.each(t.options,function(n,r){t.items.indexOf(n)==-1&&delete i[n]}),t.options=t.sifter.items=i,t.lastQuery=null,t.trigger("option_clear"),t.clear(e)},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getFirstOption:function(){var e=this.$dropdown.find("[data-selectable]");return e.length>0?e.eq(0):d()},getAdjacentOption:function(e,t){var i=this.$dropdown.find("[data-selectable]"),n=i.index(e)+t;return n>=0&&n<i.length?i.eq(n):d()},getElementWithValue:function(e,t){if(e=S(e),typeof e<"u"&&e!==null){for(var i=0,n=t.length;i<n;i++)if(t[i].getAttribute("data-value")===e)return d(t[i])}return d()},getElementWithTextContent:function(e,t,i){if(e=S(e),typeof e<"u"&&e!==null)for(var n=0,r=i.length;n<r;n++){var s=i[n].textContent;if(t==!0&&(s=s!==null?s.toLowerCase():null,e=e.toLowerCase()),s===e)return d(i[n])}return d()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},getFirstItemMatchedByTextContent:function(e,t){return t=t!==null&&t===!0,this.getElementWithTextContent(e,t,this.$dropdown_content.find("[data-selectable]"))},addItems:function(e,t){this.buffer=document.createDocumentFragment();for(var i=this.$control[0].childNodes,n=0;n<i.length;n++)this.buffer.appendChild(i[n]);for(var r=Array.isArray(e)?e:[e],n=0,s=r.length;n<s;n++)this.isPending=n<s-1,this.addItem(r[n],t);var o=this.$control[0];o.insertBefore(this.buffer,o.firstChild),this.buffer=null},addItem:function(e,t){var i=t?[]:["change"];ee(this,i,function(){var n,r,s,o=this,l=o.settings.mode,a,u;if(e=S(e),o.items.indexOf(e)!==-1){l==="single"&&o.close();return}o.options.hasOwnProperty(e)&&(l==="single"&&o.clear(t),!(l==="multi"&&o.isFull())&&(n=d(o.render("item",o.options[e])),u=o.isFull(),o.items.splice(o.caretPos,0,e),o.insertAtCaret(n),(!o.isPending||!u&&o.isFull())&&o.refreshState(),o.isSetup&&(s=o.$dropdown_content.find("[data-selectable]"),o.isPending||(r=o.getOption(e),a=o.getAdjacentOption(r,1).attr("data-value"),o.refreshOptions(o.isFocused&&l!=="single"),a&&o.setActiveOption(o.getOption(a))),!s.length||o.isFull()?o.close():o.isPending||o.positionDropdown(),o.updatePlaceholder(),o.trigger("item_add",e,n),o.isPending||o.updateOriginalInput({silent:t}))))})},removeItem:function(e,t){var i=this,n,r,s;n=e instanceof d?e:i.getItem(e),e=S(n.attr("data-value")),r=i.items.indexOf(e),r!==-1&&(i.trigger("item_before_remove",e,n),n.remove(),n.hasClass("active")&&(n.removeClass("active"),s=i.$activeItems.indexOf(n[0]),i.$activeItems.splice(s,1),n.removeClass("active")),i.items.splice(r,1),i.lastQuery=null,!i.settings.persist&&i.userOptions.hasOwnProperty(e)&&i.removeOption(e,t),r<i.caretPos&&i.setCaret(i.caretPos-1),i.refreshState(),i.updatePlaceholder(),i.updateOriginalInput({silent:t}),i.positionDropdown(),i.trigger("item_remove",e,n))},createItem:function(e,t){var i=this,n=i.caretPos;e=e||(i.$control_input.val()||"").trim();var r=arguments[arguments.length-1];if(typeof r!="function"&&(r=function(){}),typeof t!="boolean"&&(t=!0),!i.canCreate(e))return r(),!1;i.lock();var s=typeof i.settings.create=="function"?this.settings.create:function(a){var u={};u[i.settings.labelField]=a;var p=a;if(i.settings.formatValueToKey&&typeof i.settings.formatValueToKey=="function"&&(p=i.settings.formatValueToKey.apply(this,[p]),p===null||typeof p>"u"||typeof p=="object"||typeof p=="function"))throw new Error('Selectize "formatValueToKey" setting must be a function that returns a value other than object or function.');return u[i.settings.valueField]=p,u},o=ye(function(a){if(i.unlock(),!a||typeof a!="object")return r();var u=S(a[i.settings.valueField]);if(typeof u!="string")return r();i.setTextboxValue(""),i.addOption(a),i.setCaret(n),i.addItem(u),i.refreshOptions(t&&i.settings.mode!=="single"),r(a)}),l=s.apply(this,[e,o]);return typeof l<"u"&&o(l),!0},refreshItems:function(e){this.lastQuery=null,this.isSetup&&this.addItem(this.items,e),this.refreshState(),this.updateOriginalInput({silent:e})},refreshState:function(){this.refreshValidityState(),this.refreshClasses()},refreshValidityState:function(){if(!this.isRequired)return!1;var e=!this.items.length;this.isInvalid=e,this.$control_input.prop("required",e),this.$input.prop("required",!e)},refreshClasses:function(){var e=this,t=e.isFull(),i=e.isLocked;e.$wrapper.toggleClass("rtl",e.rtl),e.$control.toggleClass("focus",e.isFocused).toggleClass("disabled",e.isDisabled).toggleClass("required",e.isRequired).toggleClass("invalid",e.isInvalid).toggleClass("locked",i).toggleClass("full",t).toggleClass("not-full",!t).toggleClass("input-active",e.isFocused&&!e.isInputHidden).toggleClass("dropdown-active",e.isOpen).toggleClass("has-options",!d.isEmptyObject(e.options)).toggleClass("has-items",e.items.length>0),e.$control_input.data("grow",!t&&!i)},isFull:function(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var t,i,n,r,s,o,l=this;e=e||{},l.tagType===N?(r=l.$input.find("option"),t=[],i=[],n=[],o=[],r.get().forEach(function(a){t.push(a.value)}),l.items.forEach(function(a){s=l.options[a][l.settings.labelField]||"",o.push(a),t.indexOf(a)==-1&&i.push('<option value="'+P(a)+'" selected="selected">'+P(s)+"</option>")}),n=t.filter(function(a){return o.indexOf(a)<0}).map(function(a){return'option[value="'+a+'"]'}),t.length-n.length+i.length===0&&!l.$input.attr("multiple")&&i.push('<option value="" selected="selected"></option>'),l.$input.find(n.join(", ")).remove(),l.$input.append(i.join(""))):(l.$input.val(l.getValue()),l.$input.attr("value",l.$input.val())),l.isSetup&&(e.silent||l.trigger("change",l.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var e=this.$control_input;this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0})}},open:function(){var e=this;e.isLocked||e.isOpen||e.settings.mode==="multi"&&e.isFull()||(e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.setupDropdownHeight(),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown))},close:function(){var e=this,t=e.isOpen;e.settings.mode==="single"&&e.items.length&&(e.hideInput(),e.isBlurring&&e.$control_input[0].blur()),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t=this.settings.dropdownParent==="body"?e.offset():e.position();t.top+=e.outerHeight(!0);var i=e[0].getBoundingClientRect().width;this.settings.minWidth&&this.settings.minWidth>i&&(i=this.settings.minWidth),this.$dropdown.css({width:i,top:t.top,left:t.left})},setupDropdownHeight:function(){if(typeof this.settings.dropdownSize=="object"&&this.settings.dropdownSize.sizeType!=="auto"){var e=this.settings.dropdownSize.sizeValue;if(this.settings.dropdownSize.sizeType==="numberItems"){for(var t=this.$dropdown_content.find("*").not(".optgroup, .highlight").not(this.settings.ignoreOnDropwdownHeight),i=0,n=0,r=0,s=0,o=0;o<e;o++){var l=d(t[o]);if(l.length===0)break;if(i+=l.outerHeight(!0),typeof l.data("selectable")>"u"){if(l.hasClass("optgroup-header")){var a=window.getComputedStyle(l.parent()[0],":before");a&&(n=a.marginTop?Number(a.marginTop.replace(/\W*(\w)\w*/g,"$1")):0,r=a.marginBottom?Number(a.marginBottom.replace(/\W*(\w)\w*/g,"$1")):0,s=a.borderTopWidth?Number(a.borderTopWidth.replace(/\W*(\w)\w*/g,"$1")):0)}e++}}var u=this.$dropdown_content.css("padding-top")?Number(this.$dropdown_content.css("padding-top").replace(/\W*(\w)\w*/g,"$1")):0,p=this.$dropdown_content.css("padding-bottom")?Number(this.$dropdown_content.css("padding-bottom").replace(/\W*(\w)\w*/g,"$1")):0;e=i+u+p+n+r+s+"px"}else if(this.settings.dropdownSize.sizeType!=="fixedHeight"){console.warn('Selectize.js - Value of "sizeType" must be "fixedHeight" or "numberItems');return}this.$dropdown_content.css({height:e,maxHeight:"none"})}},clear:function(e){var t=this;t.items.length&&(t.$control.children(":not(input)").remove(),t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(null),t.updatePlaceholder(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear"))},insertAtCaret:function(e){var t=Math.min(this.caretPos,this.items.length),i=e[0],n=this.buffer||this.$control[0];t===0?n.insertBefore(i,n.firstChild):n.insertBefore(i,n.childNodes[t]),this.setCaret(t+1)},deleteSelection:function(e){var t,i,n,r,s,o,l,a,u,p=this;if(n=e&&e.keyCode===k?-1:1,r=R(p.$control_input[0]),p.$activeOption&&!p.settings.hideSelected&&(typeof p.settings.deselectBehavior=="string"&&p.settings.deselectBehavior==="top"?l=p.getFirstOption().attr("data-value"):l=p.getAdjacentOption(p.$activeOption,-1).attr("data-value")),s=[],p.$activeItems.length){for(u=p.$control.children(".active:"+(n>0?"last":"first")),o=p.$control.children(":not(input)").index(u),n>0&&o++,t=0,i=p.$activeItems.length;t<i;t++)s.push(d(p.$activeItems[t]).attr("data-value"));e&&(e.preventDefault(),e.stopPropagation())}else(p.isFocused||p.settings.mode==="single")&&p.items.length&&(n<0&&r.start===0&&r.length===0?s.push(p.items[p.caretPos-1]):n>0&&r.start===p.$control_input.val().length&&s.push(p.items[p.caretPos]));if(!s.length||typeof p.settings.onDelete=="function"&&p.settings.onDelete.apply(p,[s])===!1)return!1;for(typeof o<"u"&&p.setCaret(o);s.length;)p.removeItem(s.pop());return p.showInput(),p.positionDropdown(),p.refreshOptions(!0),l&&(a=p.getOption(l),a.length&&p.setActiveOption(a)),!0},advanceSelection:function(e,t){var i,n,r,s,o,l,a=this;e!==0&&(a.rtl&&(e*=-1),i=e>0?"last":"first",n=R(a.$control_input[0]),a.isFocused&&!a.isInputHidden?(s=a.$control_input.val().length,o=e<0?n.start===0&&n.length===0:n.start===s,o&&!s&&a.advanceCaret(e,t)):(l=a.$control.children(".active:"+i),l.length&&(r=a.$control.children(":not(input)").index(l),a.setActiveItem(null),a.setCaret(e>0?r+1:r))))},advanceCaret:function(e,t){var i=this,n,r;e!==0&&(n=e>0?"next":"prev",i.isShiftDown?(r=i.$control_input[n](),r.length&&(i.hideInput(),i.setActiveItem(r),t&&t.preventDefault())):i.setCaret(i.caretPos+e))},setCaret:function(e){var t=this;if(t.settings.mode==="single"?e=t.items.length:e=Math.max(0,Math.min(t.items.length,e)),!t.isPending){var i,n,r,s;for(r=t.$control.children(":not(input)"),i=0,n=r.length;i<n;i++)s=d(r[i]).detach(),i<e?t.$control_input.before(s):t.$control.append(s)}t.caretPos=e},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var e=this;e.$input.prop("disabled",!0),e.$control_input.prop("disabled",!0).prop("tabindex",-1),e.isDisabled=!0,e.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.$control_input.prop("disabled",!1).prop("tabindex",e.tabIndex),e.isDisabled=!1,e.unlock()},destroy:function(){var e=this,t=e.eventNS,i=e.revertSettings;e.trigger("destroy"),e.off(),e.$wrapper.remove(),e.$dropdown.remove(),e.$input.html("").append(i.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:i.tabindex}).show(),e.$control_input.removeData("grow"),e.$input.removeData("selectize"),--w.count==0&&w.$testInput&&(w.$testInput.remove(),w.$testInput=void 0),d(window).off(t),d(document).off(t),d(document.body).off(t),delete e.$input[0].selectize},render:function(e,t){var i,n,r="",s=!1,o=this;return(e==="option"||e==="item")&&(i=S(t[o.settings.valueField]),s=!!i),s&&(Z(o.renderCache[e])||(o.renderCache[e]={}),o.renderCache[e].hasOwnProperty(i))?o.renderCache[e][i]:(r=d(o.settings.render[e].apply(this,[t,P])),e==="option"||e==="option_create"?t[o.settings.disabledField]||r.attr("data-selectable",""):e==="optgroup"&&(n=t[o.settings.optgroupValueField]||"",r.attr("data-group",n),t[o.settings.disabledField]&&r.attr("data-disabled","")),(e==="option"||e==="item")&&r.attr("data-value",i||""),s&&(o.renderCache[e][i]=r[0]),r[0])},clearCache:function(e){var t=this;typeof e>"u"?t.renderCache={}:delete t.renderCache[e]},canCreate:function(e){var t=this;if(!t.settings.create)return!1;var i=t.settings.createFilter;return e.length&&(typeof i!="function"||i.apply(t,[e]))&&(typeof i!="string"||new RegExp(i).test(e))&&(!(i instanceof RegExp)||i.test(e))}}),w.count=0,w.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,showAddOptionOnCreate:!0,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!0,preload:!1,allowEmptyOption:!1,showEmptyOptionInDropdown:!1,emptyOptionLabel:"--",setFirstOptionActive:!1,closeAfterSelect:!1,closeDropdownThreshold:250,scrollDuration:60,deselectBehavior:"previous",loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",respect_word_boundaries:!0,mode:null,wrapperClass:"",inputClass:"",dropdownClass:"",dropdownContentClass:"",dropdownParent:null,copyClassesToDropdown:!0,dropdownSize:{sizeType:"auto",sizeValue:"auto"},normalize:!1,ignoreOnDropwdownHeight:"img, i",search:!0,render:{}},d.fn.selectize=function(e){var t=d.fn.selectize.defaults,i=d.extend({},t,e),n=i.dataAttr,r=i.labelField,s=i.valueField,o=i.disabledField,l=i.optgroupField,a=i.optgroupLabelField,u=i.optgroupValueField,p=function(h,f){var g,y,O,c,I=h.attr(n);if(I)for(f.options=JSON.parse(I),g=0,y=f.options.length;g<y;g++)f.items.push(f.options[g][s]);else{var v=(h.val()||"").trim();if(!i.allowEmptyOption&&!v.length)return;for(O=v.split(i.delimiter),g=0,y=O.length;g<y;g++)c={},c[r]=O[g],c[s]=O[g],f.options.push(c);f.items=O}},m=function(h,f){var g,y,O,c,I=f.options,v={},F=function(b){var _=n&&b.attr(n),x=b.data(),$={};return typeof _=="string"&&_.length&&(xe()?Object.assign($,JSON.parse(_)):$[_]=_),Object.assign($,x),$||null},z=function(b,_){b=d(b);var x=S(b.val());if(!(!x&&!i.allowEmptyOption)){if(v.hasOwnProperty(x)){if(_){var $=v[x][l];$?Array.isArray($)?$.push(_):v[x][l]=[$,_]:v[x][l]=_}return}var C=F(b)||{};C[r]=C[r]||b.text(),C[s]=C[s]||x,C[o]=C[o]||b.prop("disabled"),C[l]=C[l]||_,C.styles=b.attr("style")||"",C.classes=b.attr("class")||"",v[x]=C,I.push(C),b.is(":selected")&&f.items.push(x)}},K=function(b){var _,x,$,C,q;for(b=d(b),$=b.attr("label"),$&&(C=F(b)||{},C[a]=$,C[u]=$,C[o]=b.prop("disabled"),f.optgroups.push(C)),q=d("option",b),_=0,x=q.length;_<x;_++)z(q[_],$)};for(f.maxItems=h.attr("multiple")?null:1,c=h.children(),g=0,y=c.length;g<y;g++)O=c[g].tagName.toLowerCase(),O==="optgroup"?K(c[g]):O==="option"&&z(c[g])};return this.each(function(){if(!this.selectize){var h,f=d(this),g=this.tagName.toLowerCase(),y=f.attr("placeholder")||f.attr("data-placeholder");if(!y&&!i.allowEmptyOption&&(y=f.children('option[value=""]').text()),i.allowEmptyOption&&i.showEmptyOptionInDropdown&&!f.children('option[value=""]').length){var O=f.html(),c=P(i.emptyOptionLabel||"--");f.html('<option value="">'+c+"</option>"+O)}var I={placeholder:y,options:[],optgroups:[],items:[]};g==="select"?m(f,I):p(f,I),h=new w(f,d.extend(!0,{},t,I,e)),h.settings_user=e}})},d.fn.selectize.defaults=w.defaults,d.fn.selectize.support={validity:X},w.define("auto_position",function(){var e=this;const t={top:"top",bottom:"bottom"};e.positionDropdown=function(){return function(){const i=this.$control,n=this.settings.dropdownParent==="body"?i.offset():i.position();n.top+=i.outerHeight(!0);const r=this.$dropdown.prop("scrollHeight")+5,s=this.$control.get(0).getBoundingClientRect().top,o=this.$wrapper.height(),l=s+r+o>window.innerHeight?t.top:t.bottom,a={width:i.outerWidth(),left:n.left};if(l===t.top){const u={bottom:n.top,top:"unset"};this.settings.dropdownParent==="body"&&(u.top=n.top-this.$dropdown.outerHeight(!0)-i.outerHeight(!0),u.bottom="unset"),Object.assign(a,u),this.$dropdown.addClass("selectize-position-top"),this.$control.addClass("selectize-position-top")}else Object.assign(a,{top:n.top,bottom:"unset"}),this.$dropdown.removeClass("selectize-position-top"),this.$control.removeClass("selectize-position-top");this.$dropdown.css(a)}}()}),w.define("auto_select_on_type",function(e){var t=this;t.onBlur=function(){var i=t.onBlur;return function(n){var r=t.getFirstItemMatchedByTextContent(t.lastValue,!0);return typeof r.attr("data-value")<"u"&&t.getValue()!==r.attr("data-value")&&t.setValue(r.attr("data-value")),i.apply(this,arguments)}}()}),w.define("autofill_disable",function(e){var t=this;t.setup=function(){var i=t.setup;return function(){i.apply(t,arguments),t.$control_input.attr({autocomplete:"new-password",autofill:"no"})}}()}),w.define("clear_button",function(e){var t=this;e=d.extend({title:"Clear",className:"clear",label:"Ã—",html:function(i){return'<a class="'+i.className+'" title="'+i.title+'"> '+i.label+"</a>"}},e),t.setup=function(){var i=t.setup;return function(){i.apply(t,arguments),t.$button_clear=d(e.html(e)),t.settings.mode==="single"&&t.$wrapper.addClass("single"),t.$wrapper.append(t.$button_clear),(t.getValue()===""||t.getValue().length===0)&&t.$wrapper.find("."+e.className).css("display","none"),t.on("change",function(){t.getValue()===""||t.getValue().length===0?t.$wrapper.find("."+e.className).css("display","none"):t.$wrapper.find("."+e.className).css("display","")}),t.$wrapper.on("click","."+e.className,function(n){n.preventDefault(),n.stopImmediatePropagation(),n.stopPropagation(),!t.isLocked&&(t.clear(),t.$wrapper.find("."+e.className).css("display","none"))})}}()}),w.define("drag_drop",function(e){if(!d.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if(this.settings.mode==="multi"){var t=this;t.lock=function(){var i=t.lock;return function(){var n=t.$control.data("sortable");return n&&n.disable(),i.apply(t,arguments)}}(),t.unlock=function(){var i=t.unlock;return function(){var n=t.$control.data("sortable");return n&&n.enable(),i.apply(t,arguments)}}(),t.setup=function(){var i=t.setup;return function(){i.apply(this,arguments);var n=t.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:t.isLocked,start:function(r,s){s.placeholder.css("width",s.helper.css("width")),n.addClass("dragging")},stop:function(){n.removeClass("dragging");var r=t.$activeItems?t.$activeItems.slice():null,s=[];n.children("[data-value]").each(function(){s.push(d(this).attr("data-value"))}),t.isFocused=!1,t.setValue(s),t.isFocused=!0,t.setActiveItem(r),t.positionDropdown()}})}}()}}),w.define("dropdown_header",function(e){var t=this;e=d.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(i){return'<div class="'+i.headerClass+'"><div class="'+i.titleRowClass+'"><span class="'+i.labelClass+'">'+i.title+'</span><a href="javascript:void(0)" class="'+i.closeClass+'">&#xd7;</a></div></div>'}},e),t.setup=function(){var i=t.setup;return function(){i.apply(t,arguments),t.$dropdown_header=d(e.html(e)),t.$dropdown.prepend(t.$dropdown_header),t.$dropdown_header.find("."+e.closeClass).on("click",function(){t.close()})}}()}),w.define("optgroup_columns",function(e){var t=this;e=d.extend({equalizeWidth:!0,equalizeHeight:!0},e),this.getAdjacentOption=function(r,s){var o=r.closest("[data-group]").find("[data-selectable]"),l=o.index(r)+s;return l>=0&&l<o.length?o.eq(l):d()},this.onKeyDown=function(){var r=t.onKeyDown;return function(s){var o,l,a,u;if(this.isOpen&&(s.keyCode===B||s.keyCode===U)){t.ignoreHover=!0,u=this.$activeOption.closest("[data-group]"),o=u.find("[data-selectable]").index(this.$activeOption),s.keyCode===B?u=u.prev("[data-group]"):u=u.next("[data-group]"),a=u.find("[data-selectable]"),l=a.eq(Math.min(a.length-1,o)),l.length&&this.setActiveOption(l);return}return r.apply(this,arguments)}}();var i=function(){var r,s=i.width,o=document;return typeof s>"u"&&(r=o.createElement("div"),r.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',r=r.firstChild,o.body.appendChild(r),s=i.width=r.offsetWidth-r.clientWidth,o.body.removeChild(r)),s},n=function(){var r,s,o,l,a,u,p;if(p=d("[data-group]",t.$dropdown_content),s=p.length,!(!s||!t.$dropdown_content.width())){if(e.equalizeHeight){for(o=0,r=0;r<s;r++)o=Math.max(o,p.eq(r).height());p.css({height:o})}e.equalizeWidth&&(u=t.$dropdown_content.innerWidth()-i(),l=Math.round(u/s),p.css({width:l}),s>1&&(a=u-l*(s-1),p.eq(s-1).css({width:a})))}};(e.equalizeHeight||e.equalizeWidth)&&(H.after(this,"positionDropdown",n),H.after(this,"refreshOptions",n))}),w.define("remove_button",function(e){if(this.settings.mode!=="single"){e=d.extend({label:"&#xd7;",title:"Remove",className:"remove",append:!0},e);var t=function(i,n){var r=i,s='<a href="javascript:void(0)" class="'+n.className+'" tabindex="-1" title="'+P(n.title)+'">'+n.label+"</a>",o=function(l,a){var u=l.search(/(<\/[^>]+>\s*)$/);return l.substring(0,u)+a+l.substring(u)};i.setup=function(){var l=r.setup;return function(){if(n.append){var a=r.settings.render.item;r.settings.render.item=function(u){return o(a.apply(i,arguments),s)}}l.apply(i,arguments),i.$control.on("click","."+n.className,function(u){if(u.preventDefault(),!r.isLocked){var p=d(u.currentTarget).parent();return r.setActiveItem(p),r.deleteSelection()&&r.setCaret(r.items.length),!1}})}}()};t(this,e)}}),w.define("restore_on_backspace",function(e){var t=this;e.text=e.text||function(i){return i[this.settings.labelField]},this.onKeyDown=function(){var i=t.onKeyDown;return function(n){var r,s;if(n.keyCode===k&&this.$control_input.val()===""&&!this.$activeItems.length&&(r=this.caretPos-1,r>=0&&r<this.items.length)){s=this.options[this.items[r]],this.deleteSelection(n)&&(this.setTextboxValue(e.text.apply(this,[s])),this.refreshOptions(!0)),n.preventDefault();return}return i.apply(this,arguments)}}()}),w.define("select_on_focus",function(e){var t=this;t.on("focus",function(){var i=t.onFocus;return function(n){var r=t.getItem(t.getValue()).text();return t.clear(),t.setTextboxValue(r),t.$control_input.select(),setTimeout(function(){t.settings.selectOnTab&&t.setActiveOption(t.getFirstItemMatchedByTextContent(r)),t.settings.score=null},0),i.apply(this,arguments)}}()),t.onBlur=function(){var i=t.onBlur;return function(n){return t.getValue()===""&&t.lastValidValue!==t.getValue()&&t.setValue(t.lastValidValue),setTimeout(function(){t.settings.score=function(){return function(){return 1}}},0),i.apply(this,arguments)}}(),t.settings.score=function(){return function(){return 1}}}),w.define("tag_limit",function(e){const t=this;e.tagLimit=e.tagLimit,this.onBlur=function(i){const n=t.onBlur;return function(r){if(n.apply(this,r),!r)return;const s=this.$control,o=s.find(".item"),l=e.tagLimit;l===void 0||o.length<=l||(o.toArray().forEach(function(a,u){u<l||d(a).hide()}),s.append("<span><b>"+(o.length-l)+"</b></span>"))}}(),this.onFocus=function(i){const n=t.onFocus;return function(r){if(n.apply(this,r),!r)return;const s=this.$control;s.find(".item").show(),s.find("span").remove()}}()}),w})})(Ae);window.Alpine=ie;window.$=Fe;ie.start();
